{"version":3,"file":"index.js","mappings":"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","sources":["webpack://slap/webpack/universalModuleDefinition","webpack://slap/./node_modules/immer/dist/immer.esm.js","webpack://slap/./node_modules/is-plain-object/dist/is-plain-object.js","webpack://slap/./node_modules/object-assign/index.js","webpack://slap/./node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://slap/./node_modules/react/jsx-runtime.js","webpack://slap/./lib/index.ts","webpack://slap/./lib/react-bindings/ReactModules.tsx","webpack://slap/./lib/react-bindings/hooks.ts","webpack://slap/./lib/react-bindings/react-store-adapter.ts","webpack://slap/./lib/react-bindings/useModule.ts","webpack://slap/./lib/react-bindings/useModuleInstance.ts","webpack://slap/./lib/react-bindings/useSelector.ts","webpack://slap/./lib/scope/index.ts","webpack://slap/./lib/scope/injector.ts","webpack://slap/./lib/scope/interfaces.ts","webpack://slap/./lib/scope/provider.ts","webpack://slap/./lib/scope/scope.ts","webpack://slap/./lib/scope/subject.ts","webpack://slap/./lib/scope/utils.ts","webpack://slap/./lib/store/StateView.ts","webpack://slap/./lib/store/Store.ts","webpack://slap/./lib/store/form-binding.ts","webpack://slap/./lib/store/index.ts","webpack://slap/./lib/store/injectState.ts","webpack://slap/./lib/store/plugins/pickControllers.ts","webpack://slap/./lib/store/plugins/pickLoadingState.ts","webpack://slap/./lib/store/plugins/pickProps.ts","webpack://slap/./lib/store/plugins/pickState.ts","webpack://slap/./lib/store/plugins/pickStateViews.ts","webpack://slap/./lib/utils/isDeepEqual.ts","webpack://slap/./lib/utils/traverse.ts","webpack://slap/external umd \"react\"","webpack://slap/external umd \"react-dom\"","webpack://slap/./node_modules/nanoevents/index.js","webpack://slap/webpack/bootstrap","webpack://slap/webpack/runtime/define property getters","webpack://slap/webpack/runtime/hasOwnProperty shorthand","webpack://slap/webpack/runtime/make namespace object","webpack://slap/webpack/before-startup","webpack://slap/webpack/startup","webpack://slap/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"slap\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"slap\"] = factory(root[\"react\"], root[\"react-dom\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE__156__, __WEBPACK_EXTERNAL_MODULE__386__) {\nreturn ","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexports.isPlainObject = isPlainObject;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export * from './scope/scope';\nexport * from './store';\nexport * from './react-bindings/ReactModules';\nexport * from './react-bindings/useSelector';\nexport * from './react-bindings/useModuleInstance';\nexport * from './react-bindings/useModule';\n","import React, {\n  ReactNode, useContext, useEffect,\n} from 'react';\nimport { useOnCreate } from './hooks';\nimport { Scope, TModuleConstructorMap } from '../scope';\nimport { ReactStoreAdapter } from './react-store-adapter';\nimport { Store } from '../store/Store';\n\nexport type TAppContext = {\n  rootScope: Scope; // keeps singleton services in the root scope\n  modulesScope: Scope; // keeps non-singleton modules\n}\n\nexport const SlapContext = React.createContext<TAppContext|null>(null);\n\n\nexport function useAppContext() {\n  return useContext(SlapContext)!;\n}\n\n\nexport function createApp(Services: TModuleConstructorMap = {}): TAppContext {\n  const rootScope = new Scope({ ...Services, Store, ReactStoreAdapter });\n  const modulesScope = rootScope.createChildScope({}, { autoregister: true });\n\n  rootScope.init(ReactStoreAdapter);\n\n  return { rootScope, modulesScope };\n}\n\nexport function ReactModules(p: {children: ReactNode | ReactNode[], app?: TAppContext}) {\n  const appScope = useOnCreate(() => p.app || createApp());\n\n  return (\n    <SlapContext.Provider value={appScope}>\n      {p.children}\n    </SlapContext.Provider>\n  );\n}\n\n\n// export function SlapModuleRoot(p: {children: ReactNode | ReactNode[], module: any }) {\n//   const scope = useAppContext().modulesScope;\n//\n//   const { moduleName, store, moduleScope } = useOnCreate(() => {\n//     const store = scope.resolve(Store);\n//     const moduleName = p.module.prototype.constructor.name;\n//     const moduleScope = scope.registerScope({ [moduleName]: p.module });\n//     return { moduleScope, moduleName, store };\n//   });\n//\n//   store.setModuleContext(moduleName, moduleScope);\n//   useEffect(() => {\n//     store.resetModuleContext(moduleName);\n//   });\n//   return <>{p.children}</>;\n// }\n","import React, { useState, useEffect } from 'react';\n\n/**\n * onCreate shortcut\n * Helpful if you need to calculate an immutable initial state for a component\n */\nexport function useOnCreate<TReturnValue>(cb: () => TReturnValue) {\n  return useState(cb)[0];\n}\n\n/**\n * onDestroy shortcut\n */\nexport function useOnDestroy(cb: () => void) {\n  useEffect(() => cb, []);\n}\n\nlet nextComponentId = 1;\n\n/**\n * Returns a unique component id\n * If DEBUG=true then the componentId includes a component name\n */\nexport function useComponentId() {\n  const DEBUG = false;\n  return useOnCreate(() => (DEBUG ? `${nextComponentId++}_${getComponentName()}` : `${nextComponentId++}`));\n}\n\n/**\n * Get component name from the callstack\n * Use for debugging only\n */\nfunction getComponentName(): string {\n  try {\n    throw new Error();\n  } catch (e: unknown) {\n    const error = e as Error;\n    return error.stack!.split('\\n')[10].split('at ')[1].split('(')[0].trim();\n  }\n}\n\n/**\n * Returns a function for force updating of the component\n * Use it only for frequently used components for optimization purposes\n *\n * Current implementation from\n * https://github.com/ant-design/ant-design/blob/master/components/_util/hooks/useForceUpdate.ts\n */\nexport function useForceUpdate() {\n  const [, forceUpdate] = React.useReducer(x => x + 1, 0);\n  return forceUpdate;\n}\n","// TODO move to react folder\nimport { generateId } from '../scope';\nimport { Store } from '../store/Store';\nimport { inject } from '../scope/injector';\nimport { unstable_batchedUpdates } from 'react-dom';\n\nexport class ReactStoreAdapter {\n\n  store = inject(Store);\n\n  load() {\n    this.store.events.on('onMutation', () => this.updateUI());\n  }\n\n  watchers = {} as Record<string, Function>;\n\n  watchersOrder = [] as string[];\n\n  // TODO: rename to register-component ?\n  createWatcher(cb: Function) {\n    const watcherId = generateId();\n    this.watchersOrder.push(watcherId);\n    this.watchers[watcherId] = cb;\n    return watcherId;\n  }\n\n  removeWatcher(watcherId: string) {\n    const ind = this.watchersOrder.findIndex(id => watcherId === id);\n    this.watchersOrder.splice(ind, 1);\n    delete this.watchers[watcherId];\n  }\n\n  updateUI() {\n    // TODO: add batching here?\n    const watchersIds = [...this.watchersOrder];\n    unstable_batchedUpdates(() => {\n      watchersIds.forEach(id => this.watchers[id] && this.watchers[id]());\n    });\n  }\n}\n","import { useForceUpdate, useOnCreate, useOnDestroy } from './hooks';\nimport { useSelector } from './useSelector';\nimport { useModuleInstance } from './useModuleInstance';\nimport { generateId, TModuleInstanceFor, TModuleLocatorType } from '../scope';\nimport {\n  ComponentView,\n  createStateViewForModule,\n  GetProps,\n  MergeViews, StateView,\n  TStateViewFor,\n} from '../store/StateView';\n\nexport function useComponentView<TStateView extends StateView<any>>(moduleView: TStateView, id?: string): TStateView['props'] & {componentView: ComponentView<TStateView>, extend: <TNewProps>(\n    newPropsFactory: (props: GetProps<TStateView>) => TNewProps,\n  ) => (MergeViews<StateView<GetProps<TStateView> & TNewProps>, TStateViewFor<TNewProps>>)['props'] & {componentView: ComponentView<TStateView> }} {\n  const forceUpdate = useForceUpdate();\n\n  const { selector, componentId, componentView } = useOnCreate(() => {\n\n    const componentId = id || generateId();\n    const componentView = moduleView.registerComponent(componentId, forceUpdate);\n    const stateView = componentView.stateView;\n\n    // check affected components\n    function selector() {\n      if (!stateView.hasSelectedProps) return;\n      const reactiveValues = stateView.getSnapshot();\n      return reactiveValues;\n    }\n\n    function extend<TNewProps>(\n      newPropsFactory: (props: GetProps<TStateView>) => TNewProps,\n    ): (MergeViews<StateView<GetProps<TStateView> & TNewProps>, TStateViewFor<TNewProps>>)['props'] {\n      const extendedView = moduleView.extend(newPropsFactory);\n      return useComponentView(extendedView, componentId) as any;\n    }\n\n    stateView.defineProp({\n      type: 'extend',\n      name: 'extend',\n      getValue: () => extend,\n    });\n\n    stateView.defineProp({\n      type: 'ComponentView',\n      name: 'componentView',\n      getValue: () => componentView,\n    });\n\n    return {\n      selector, componentId, componentView,\n    };\n  });\n\n  useOnDestroy(() => {\n    moduleView.destroyComponent(componentId);\n  });\n\n  // useDetectChanges\n  // call selector to make selected props reactive\n  useSelector(selector as any);\n\n  return componentView.stateView.proxy;\n}\n\nexport function useModule<T extends TModuleLocatorType, TInitState extends boolean | Partial<TModuleInstanceFor<T>['state']>>(locator: T, initProps: TInitState|null = null, moduleName = '') {\n  const module = useModuleInstance(locator, initProps, moduleName);\n  const moduleView = useOnCreate(() => createStateViewForModule(module));\n  return useComponentView(moduleView);\n}\n","import { useEffect } from 'react';\nimport { useOnCreate, useOnDestroy } from './hooks';\nimport { useAppContext } from './ReactModules';\nimport { Store } from '../store/Store';\nimport { Scope, TModuleInstanceFor, TModuleLocatorType } from '../scope';\n\nexport function useModuleInstance<T extends TModuleLocatorType, TInitProps extends boolean | Partial<TModuleInstanceFor<T>['state']>>(locator: T, initProps: TInitProps|null = null, name = ''): TModuleInstanceFor<T> {\n  const rootScope = useAppContext().modulesScope;\n\n  const {\n    instance,\n    moduleName,\n    scope,\n    isRoot,\n    store,\n  } = useOnCreate(() => {\n\n    const moduleName = name || typeof locator === 'string' ? locator : (locator as any).name;\n    const store = rootScope.resolve(Store);\n\n    let isRoot = !!initProps;\n    let scope: Scope = isRoot ? rootScope : store.currentContext[moduleName];\n\n    if (!scope) {\n      if (rootScope.isRegistered(locator)) {\n        scope = rootScope;\n      } else {\n        isRoot = true;\n      }\n    }\n\n    if (isRoot) scope = rootScope.registerScope({}, { autoregister: true });\n\n    const instance = scope.resolve(locator);\n\n    if (initProps && typeof initProps === 'object') {\n      instance.state['updateState'](initProps);\n    }\n\n    return {\n      instance,\n      store,\n      isRoot,\n      scope,\n      moduleName,\n    };\n  });\n\n  isRoot && store.setModuleContext(moduleName, scope);\n  useEffect(() => {\n    isRoot && store.resetModuleContext(moduleName);\n  }, []);\n\n  // unregister the component from the module onDestroy\n  useOnDestroy(() => {\n    if (isRoot) scope.dispose();\n  });\n\n  return instance;\n}\n","import { useEffect, useRef } from 'react';\nimport { useForceUpdate } from './hooks';\nimport { useAppContext } from './ReactModules';\nimport { Store } from '../store/Store';\nimport { ReactStoreAdapter } from './react-store-adapter';\nimport { isSimilar } from '../utils/isDeepEqual';\n\nexport function useSelector(cb: Function) {\n  const affectedModulesRef = useRef<Record<string, number>>({});\n  const currentSelectorStateRef = useRef<Record<string, any>>({});\n  const forceUpdate = useForceUpdate();\n  const scope = useAppContext().modulesScope;\n  const store = scope.resolve(Store);\n  const reactStore = scope.resolve(ReactStoreAdapter);\n\n  useEffect(() => {\n    affectedModulesRef.current = store.listenAffectedModules(() => {\n      currentSelectorStateRef.current = cb();\n    });\n\n    // TODO do not run watchers for non-observable component views\n\n    const watcherId = reactStore.createWatcher(() => {\n      const prevRevisions = affectedModulesRef.current;\n      const currentRevisions = store.moduleRevisions;\n\n      let modulesHasChanged = false;\n      for (const moduleName in prevRevisions) {\n        if (prevRevisions[moduleName] !== currentRevisions[moduleName]) {\n          modulesHasChanged = true;\n          break;\n        }\n\n        if (!modulesHasChanged) {\n          // dependent modules don't have changes in the state\n          // do not re-render\n          return;\n        }\n      }\n\n      const prevSelectorState = currentSelectorStateRef.current;\n\n      affectedModulesRef.current = store.listenAffectedModules(() => {\n        currentSelectorStateRef.current = cb();\n      });\n\n      if (!isSimilar(prevSelectorState, currentSelectorStateRef.current)) {\n        // TODO try batched updates\n        forceUpdate();\n      }\n    });\n    return () => {\n      reactStore.removeWatcher(watcherId);\n    };\n  }, []);\n}\n","export * from './interfaces';\nexport * from './scope';\nexport * from './subject';\nexport * from './utils';\n","import { TLoadingStatus, TModuleClass } from './interfaces';\nimport { defineGetter, generateId } from './utils';\nimport { getCurrentProvider } from './scope';\nimport { Provider } from './provider';\n\nexport type TInjectorParams<TValue, TInitValue> = {\n  type: Symbol;\n  loadingStatus?: TLoadingStatus,\n  init?(injector: Injector<TValue, TInitValue>): TInitValue;\n  load?(injector: Injector<TValue, TInitValue>): unknown;\n  getValue?(): TValue;\n  destroy?(currentInjector: Injector<TValue, TInitValue>): unknown;\n}\n\nexport class Injector<TValue, TInitValue> {\n  id = generateId();\n  params!: TInjectorParams<TValue, TInitValue>;\n  loadingStatus: TLoadingStatus = 'not-started';\n  propertyName = '';\n\n  constructor(public provider: Provider<any>) {\n  }\n\n  init() {\n    this.params.init && this.params.init(this);\n    const getValue = this.params.getValue;\n    if (getValue) {\n      defineGetter(this.provider.instance, this.propertyName, getValue);\n    }\n\n    const load = this.params.load;\n    const loadResult = load && load(this) as any;\n    if (loadResult && loadResult.then) {\n      this.setLoadingStatus('loading');\n      loadResult.then(() => {\n        this.setLoadingStatus('done');\n      });\n    } else {\n      this.loadingStatus = 'done';\n    }\n\n  }\n\n  setPropertyName(propertyName: string) {\n    this.propertyName = propertyName;\n  }\n\n  setLoadingStatus(loadingStatus: TLoadingStatus) {\n    const prevStatus = this.loadingStatus;\n    this.loadingStatus = loadingStatus;\n    this.provider.handleInjectorStatusChange(this, this.loadingStatus, prevStatus);\n  }\n\n  destroy() {\n    this.params.destroy && this.params.destroy(this);\n  }\n\n  resolveValue(): TValue {\n    return this.provider.instance[this.propertyName];\n  }\n\n  get type() {\n    return this.params.type;\n  }\n}\n\nexport function createInjector<\n  TParams extends TInjectorParams<any, any>,\n  TValue = TParams extends { getValue(): infer R} ? R : unknown,\n  TInitParams = TParams extends { init(): infer R} ? R : unknown\n  >\n(paramsCreator: (injector: Injector<any, any>) => TParams) {\n  const provider = getCurrentProvider();\n  if (!provider) {\n    throw new Error('Injections a not allowed for objects outside the Scope. Create this object via Scope.resolve() or Scope.init() or Scope.create()');\n  }\n  const injector = new Injector<TValue, TInitParams>(provider);\n  injector.params = paramsCreator(injector);\n  return injector as any as TValue;\n}\n\n// DEFINE BUILT-IN INJECTORS\n\nexport const ModuleInjectorType = Symbol('moduleInjector');\n\nexport function inject<T extends TModuleClass>(ModuleClass: T) {\n  return createInjector(injector => ({\n    type: ModuleInjectorType,\n    getValue: () => injector.provider.scope.resolve(ModuleClass),\n  }));\n}\n\nexport const ScopeInjectorType = Symbol('scopeInjector');\n\nexport function injectScope() {\n  return createInjector(injector => ({\n    type: ScopeInjectorType,\n    getValue: () => injector.provider.scope,\n  }));\n}\n","import { Dict } from './utils';\nimport { Provider } from './provider';\n\nexport type TInstances<T extends { [key: string]: new (...args: any) => any }> = {\n  [P in keyof T]: InstanceType<T[P]>;\n};\n\nexport type GetInjectReturnType<Type> = Type extends new (...args: any) => any\n  ? InstanceType<Type>\n  : Type extends { [key: string]: new (...args: any) => any } ? TInstances<Type> :\n    never;\nexport type TInjector = <T>(injectedObject: T) => GetInjectReturnType<T>\n\nexport type TModuleConstructor = new (...args: any[]) => any;\nexport type TModuleConstructorMap = { [key: string]: TModuleConstructor }\n\nexport type TModuleClass = new (...args: any) => any;\nexport type AConstructorTypeOf<T> = new (...args:any[]) => T;\n\nexport type TModuleCreator = TModuleClass | Dict<any> | ((...args: any) => any)\nexport type TModuleLocatorType = TModuleCreator | string;\n\nexport type TModuleInstanceFor<TModuleLocator> =\n  TModuleLocator extends new (...args: any[]) => infer TInstance ?\n    TInstance :\n    TModuleLocator extends string ? unknown: TModuleLocator\n\nexport type TProviderFor<TModuleLocator extends TModuleLocatorType> = Provider<TModuleInstanceFor<TModuleLocator>>\nexport type TLoadingStatus = 'not-started' | 'loading' | 'done' | 'error';\n","import { createNanoEvents } from 'nanoevents';\nimport { isPlainObject } from 'is-plain-object';\nimport { Scope } from './scope';\nimport { defineGetter, Dict, generateId } from './utils';\nimport { Injector } from './injector';\nimport { TLoadingStatus } from './interfaces';\n\nexport class Provider<TInstance, TInitParams extends [] = []> {\n  id: string;\n  instance: TInstance | null = null;\n  metadata: Dict<any> = {};\n  injectors: Dict<Injector<unknown, unknown>> = {};\n  factory: (args: TInitParams) => TInstance;\n\n  isInited = false; // instance is added to Scope\n  injectionCompleted = false;\n  loadMethodCompleted = false;\n  isLoaded = false;\n  private resolveLoad!: Function;\n  waitForLoad = new Promise(resolve => { this.resolveLoad = resolve });\n\n  initParams?: TInitParams; // TODO\n\n  constructor(\n    public scope: Scope,\n    creator: (new (...args: TInitParams) => TInstance) | ((...args: TInitParams) => TInstance) | TInstance,\n    public name = '',\n  ) {\n    if (!this.name) this.name = `AnonymousProvider__${generateId()}`;\n    this.id = `${this.name}__${this.scope.id}__${generateId()}`;\n\n    if (typeof creator === 'function') {\n\n      // TODO find a better way to distinguish Class and Function\n      const isClass = creator.name.charAt(0) === creator.name.charAt(0).toUpperCase();\n\n      if (isClass) {\n        this.factory = (args: TInitParams) => new (creator as any)(...args);\n        return;\n      }\n\n      // creator is a function\n      this.factory = args => (creator as (...args: TInitParams) => TInstance)(...args);\n      return;\n    }\n\n    // creator is an object\n    if (isPlainObject(creator)) {\n      this.factory = () => creator;\n      return;\n    }\n\n    throw new Error(`Can not construct the object ${creator}`);\n  }\n\n  createInstance(args: TInitParams): TInstance {\n    const instance = this.factory(args) as any;\n    this.instance = instance;\n    this.initParams = args;\n    createInstanceMetadata(instance, this);\n    instance.init && instance.init();\n    this.resolveInjectors();\n    return instance;\n  }\n\n  setInited() {\n    this.isInited = true;\n    this.checkModuleIsLoaded();\n  }\n\n  /**\n   * Resolve injectors for just created object\n   *\n   *  WARNING!\n   *  this code is executed for every object creation\n   *  and should care about performance\n   */\n  private resolveInjectors() {\n    const provider = this;\n    const instance = provider.instance;\n    const descriptors = Object.getOwnPropertyDescriptors(instance);\n    let hasAsyncInjectors = false;\n\n    // register injectors\n    Object.keys(descriptors).forEach(propName => {\n      const descriptor = descriptors[propName];\n      if (descriptor.get) return; // don't execute getters\n      const propValue = descriptor.value;\n      if (!(propValue instanceof Injector)) return;\n      const injector = propValue as Injector<unknown, unknown>;\n      provider.injectors[injector.id] = injector;\n      injector.setPropertyName(propName);\n    });\n\n    // call init() for injectors\n    Object.values(this.injectors).forEach(injector => {\n      injector.init();\n      if (injector.loadingStatus !== 'done') hasAsyncInjectors = true;\n    });\n\n    if (!hasAsyncInjectors) this.handleInjectionsCompleted();\n  }\n\n  getMetadata(pluginName: string) {\n    return this.metadata[pluginName];\n  }\n\n  setMetadata(pluginName: string, data: any) {\n    this.metadata[pluginName] = data;\n  }\n\n  destroy() {\n    // destroy provider\n    // unsubscribe events\n    this.events.events = {};\n  }\n\n  destroyInstance() {\n    const instance = this.instance as any;\n    if (!instance) return;\n\n    // destroy instance\n    instance.destroy && instance.destroy();\n    this.initParams = [] as any;\n\n    // destroy injectors\n    Object.keys(this.injectors).forEach(injectorName => {\n      this.injectors[injectorName].destroy();\n    });\n\n    this.instance = null;\n    this.isInited = false;\n  }\n\n  handleInjectorStatusChange(\n    injector: Injector<unknown, unknown>,\n    currentStatus: TLoadingStatus,\n    prevStatus: TLoadingStatus,\n  ) {\n    this.events.emit('onInjectorStatusChange', injector, currentStatus, prevStatus);\n    this.checkInjectionIsCompleted();\n  }\n\n  protected checkInjectionIsCompleted() {\n    if (!this.injectionCompleted) {\n      const injectors = Object.values(this.injectors);\n      for (const injector of injectors) {\n        if (injector.loadingStatus !== 'done') return;\n      }\n    }\n    this.handleInjectionsCompleted();\n  }\n\n  protected handleInjectionsCompleted() {\n    this.injectionCompleted = true;\n    const instance = this.instance as any;\n    const loadResult = instance.load && instance.load();\n    if (loadResult?.then) {\n      loadResult.then(() => {\n        this.loadMethodCompleted = true;\n        this.checkModuleIsLoaded();\n      });\n    } else {\n      this.loadMethodCompleted = true;\n      this.checkModuleIsLoaded();\n    }\n  }\n\n  protected checkModuleIsLoaded() {\n    if (!this.isInited) return;\n    if (!this.injectionCompleted) return;\n    if (!this.loadMethodCompleted) return;\n    const instance = this.instance as any;\n    instance.onLoad && instance.onLoad();\n    this.isLoaded = true;\n    this.resolveLoad();\n    this.events.emit('onModuleLoaded');\n  }\n\n  get instanceId() {\n    return getInstanceMetadata(this.instance).id;\n  }\n\n  events = createNanoEvents<ProviderEvents>();\n}\n\n\n\nfunction createInstanceMetadata(instance: any, provider: Provider<any, any>) {\n  const id = `${provider.id}__${generateId()}`;\n  const descriptor = { enumerable: false, configurable: false };\n\n  defineGetter(instance, '__instanceId', () => id, descriptor);\n  defineGetter(instance, '__provider', () => provider, descriptor);\n}\n\nexport function getInstanceMetadata(instance: any) {\n  const provider: Provider<any> = instance.__provider;\n\n  if (!provider) {\n    throw new Error(`Provider non found for a given instance ${instance}`);\n  }\n\n  return {\n    provider,\n    id: instance.__instanceId as string,\n  };\n}\n\nexport interface ProviderEvents {\n  onInjectorStatusChange: (\n    injector: Injector<unknown, unknown>,\n    current: TLoadingStatus,\n    prev: TLoadingStatus\n  ) => unknown;\n  onModuleLoaded: () => unknown,\n}\n","import { createNanoEvents } from 'nanoevents';\nimport {\n  TModuleClass,\n  TModuleConstructorMap, TModuleCreator, TModuleInstanceFor,\n  TModuleLocatorType,\n  TProviderFor,\n} from './interfaces';\nimport { generateId } from './utils';\nimport { Provider } from './provider';\n\nlet currentScope: Scope | null = null;\nlet currentProvider: Provider<any> | null = null;\n\ninterface ScopeSettings {\n  parentScope: Scope | null,\n  autoregister: boolean,\n}\n\nconst defaultScopeSettings = {\n  parentScope: null,\n  autoregister: false,\n};\n\n/**\n * A Dependency injection container\n */\nexport class Scope {\n  id!: string;\n\n  childScopes: Record<string, Scope> = {};\n\n  providers: Record<string, Provider<any>> = {};\n\n  settings: ScopeSettings;\n\n  constructor(\n    dependencies: TModuleConstructorMap = {},\n    settings: Partial<ScopeSettings> = {},\n  ) {\n    const uid = generateId();\n    const parentScope = settings?.parentScope;\n\n    this.id = parentScope ? `${parentScope.id}__${uid}` : `root_${uid}`;\n\n    this.settings = parentScope\n      ? { ...parentScope.settings, ...settings }\n      : { ...defaultScopeSettings, ...settings };\n\n    dependencies && this.registerMany(dependencies);\n  }\n\n  registerMany(dependencies: TModuleConstructorMap) {\n    Object.keys(dependencies).forEach(depName => this.register(dependencies[depName], depName));\n  }\n\n  register<T extends TModuleCreator>(ModuleCreator: T, name?: string): TProviderFor<T> {\n    const moduleName = name || ModuleCreator.name || `AnonymousModule_${generateId()}`;\n    if (this.providers[moduleName]) {\n      throw new Error(`${moduleName} already registered in the given Scope`);\n    }\n\n    const provider = new Provider(this, ModuleCreator, moduleName);\n    this.providers[moduleName] = provider;\n\n    this.events.emit('onModuleRegister', provider);\n    return provider;\n  }\n\n  getProvider<T extends TModuleLocatorType>(moduleLocator: T): TProviderFor<T> | null {\n    const moduleName = typeof moduleLocator === 'string' ? moduleLocator : moduleLocator.name;\n    if (!moduleName) return null;\n\n    const provider = this.providers[moduleName];\n    if (provider) return provider;\n    if (!this.parent) return null;\n\n    return this.parent.getProvider(moduleName);\n  }\n\n  resolveProvider<T extends TModuleLocatorType>(moduleLocator: T): TProviderFor<T> {\n    const provider = this.getProvider(moduleLocator);\n    if (provider) return provider;\n\n    const shouldRegister = this.settings.autoregister && typeof moduleLocator !== 'string';\n    if (shouldRegister) return this.register(moduleLocator);\n\n    throw new Error(`Provider not found ${moduleLocator}`);\n  }\n\n  getInstance<T extends TModuleLocatorType>(locator: T) {\n    const provider = this.getProvider(locator);\n    return provider ? provider.instance : null;\n  }\n\n  resolve<T extends TModuleLocatorType>(locator: T): TModuleInstanceFor<T> {\n    const provider = this.resolveProvider(locator);\n    if (provider.instance) return provider.instance;\n    return this.init(locator, ...[] as any);\n  }\n\n  unregister(ModuleClass: TModuleClass) {\n    // TODO\n  }\n\n  // helper methods\n\n  isRegistered(moduleLocator: TModuleLocatorType): boolean {\n    return !!this.getProvider(moduleLocator);\n  }\n\n  hasInstance(moduleLocator: TModuleLocatorType): boolean {\n    const provider = this.resolveProvider(moduleLocator);\n    return !!provider?.instance;\n  }\n\n  /**\n   * Instantiate a registered module\n   * TODO type for args\n   */\n  init<T extends TModuleLocatorType>(locator: T, ...args: any[]): TModuleInstanceFor<T> {\n    const provider = this.resolveProvider(locator);\n\n    if (provider.instance) {\n      throw new Error(`The module ${provider.name} is already inited in the given scope`);\n    }\n\n    return this.create(locator, ...args);\n  }\n\n  /**\n   * Register and instantiate a module\n   * TODO add type for args\n   */\n  start<T extends TModuleCreator>(creator: T, ...args: any[]): TModuleInstanceFor<T> {\n    this.register(creator);\n    const instance = this.init(creator, ...args as any);\n    return instance;\n  }\n\n  /**\n   * create the instance and resolve injections\n   * every time returns a new instance\n   */\n  // TODO add type for args\n  create<TLocator extends TModuleLocatorType>(locator: TLocator, ...args: any): TModuleInstanceFor<TLocator> {\n    const prevScope = currentScope;\n    currentScope = this;\n\n    let provider: TProviderFor<TLocator>;\n\n    const isRegistered = this.isRegistered(locator);\n    if (isRegistered) {\n      provider = this.resolveProvider(locator);\n    } else {\n      provider = new Provider(this, locator);\n    }\n\n    const prevProvider = currentProvider;\n    currentProvider = provider;\n\n    const instance = provider.createInstance(args);\n    currentScope = prevScope;\n    currentProvider = prevProvider;\n\n    if (isRegistered) {\n      provider.events.on('onModuleLoaded', () => {\n        this.events.emit('onModuleLoad', provider);\n      });\n      this.events.emit('onModuleInit', provider);\n      provider.setInited();\n    }\n\n    return instance;\n  }\n\n  createChildScope(\n    dependencies?: TModuleConstructorMap,\n    settings?: Omit<Partial<ScopeSettings>, 'parentScope'>,\n  ) {\n    return new Scope(dependencies, { ...settings, parentScope: this });\n  }\n\n  // TODO refactor\n  registerScope(dependencies?: TModuleConstructorMap, settings?: Partial<Scope['settings']>) {\n    const scope = this.createChildScope({}, settings);\n    this.childScopes[scope.id] = scope;\n    scope.events = this.events;\n    dependencies && scope.registerMany(dependencies);\n    return scope;\n  }\n\n  unregisterScope(scopeId: string) {\n    const scope = this.childScopes[scopeId];\n    if (!scope) throw new Error(`Can not unregister Scope ${scopeId} - Scope not found`);\n    scope.dispose();\n    delete this.childScopes[scopeId];\n  }\n\n  getRootScope(): Scope {\n    if (!this.parent) return this;\n    return this.parent.getRootScope();\n  }\n\n  dispose() {\n    // destroy child scopes\n    Object.keys(this.childScopes).forEach(scopeId => {\n      this.unregisterScope(scopeId);\n    });\n\n    // destroy providers\n    Object.keys(this.providers).forEach(providerName => {\n      this.providers[providerName].destroy();\n    });\n\n    // unsubscribe events\n    if (!this.parent) this.events.events = {};\n  }\n\n  getScheme(): any {\n    return {\n      id: this.id,\n      registry: this.providers,\n      parentScope: this.parent ? this.parent.getScheme() : null,\n    };\n  }\n\n  get isRoot() {\n    return !!this.parent;\n  }\n\n  get parent() {\n    return this.settings.parentScope;\n  }\n\n  events = createNanoEvents<ScopeEvents>();\n}\n\nexport interface ScopeEvents {\n  onModuleRegister: (provider: Provider<any>) => void\n  onModuleInit: (provider: Provider<any>) => void,\n  onModuleLoad: (provider: Provider<any>) => void,\n}\n\nexport function getCurrentScope() {\n  return currentScope;\n}\n\nexport function getCurrentProvider() {\n  return currentProvider;\n}\n","import { createNanoEvents } from 'nanoevents';\n\nexport class Subject<TData> {\n  emitter = createNanoEvents();\n\n  subscribe(cb: (args: TData) => void) {\n    const unsubscribe = this.emitter.on('next', cb);\n    return new Subscription(unsubscribe);\n  }\n\n  next(data: TData) {\n    this.emitter.emit('next', data);\n  }\n}\n\nexport class Subscription {\n  constructor(public unsubscribe: (...args: any) => void) {}\n}\n","import { isPlainObject } from 'is-plain-object';\n\nlet idCounter = 1;\n\nexport function generateId() {\n  return (idCounter++).toString();\n}\n\nexport function assertIsDefined<T>(val: T): asserts val is NonNullable<T> {\n  if (val === undefined || val === null) {\n    throw new Error(`Expected 'val' to be defined, but received ${val}`);\n  }\n}\n\nexport function getDefined<T>(val: T): NonNullable<T> {\n  assertIsDefined(val);\n  return val;\n}\n\nexport function hasGetter(instance: any, getterName: string) {\n  const stateDescriptor = Object.getOwnPropertyDescriptor(instance, getterName);\n  return !!stateDescriptor?.get;\n}\n\nexport type Dict<T> = Record<string, T>;\n\n\nexport function forEach<TDict, TKey extends keyof TDict>(dict: TDict, cb: (val: TDict[TKey], key: TKey) => unknown) {\n  Object.keys(dict).forEach(propName => {\n    (cb as any)((dict as any)[propName], propName);\n  });\n}\n\nexport function defineGetter(target: object, methodName: string, getter: () => any, descriptor?: Partial<PropertyDescriptor>) {\n  Object.defineProperty(target, methodName, {\n    configurable: descriptor?.configurable ?? true,\n    enumerable: descriptor?.enumerable ?? true,\n    get: getter,\n  });\n}\n\nexport function defineSetter(target: object, methodName: string, setter: (val: any) => boolean, descriptor?: Partial<PropertyDescriptor>) {\n  Object.defineProperty(target, methodName, {\n    configurable: descriptor?.configurable ?? true,\n    enumerable: descriptor?.enumerable ?? true,\n    set: setter,\n  });\n}\n\nexport function capitalize(srt: string): string {\n  return srt.charAt(0).toUpperCase() + srt.slice(1);\n}\n","// composition layer\n// construct a ReactiveObject based on given presets\n// has module,stateSelector and allow extending\nimport { defineGetter, Dict, forEach, Scope, TModuleInstanceFor } from '../scope';\nimport { getInstanceMetadata } from '../scope/provider';\nimport { pickProps } from './plugins/pickProps';\nimport { GetStateViewProps, pickStateViews } from './plugins/pickStateViews';\nimport { GetLoadingState, pickLoadingState } from './plugins/pickLoadingState';\nimport { GetModuleState, pickState } from './plugins/pickState';\nimport { GetControllerProps, pickControllers } from './plugins/pickControllers';\n\nexport class StateView<TProps = {}> {\n\n  props: TProps = {} as TProps;\n  proxy: TProps;\n  descriptors = {} as TGetDescriptorsForProps<TProps>;\n  selectedDescriptors = {} as TGetDescriptorsForProps<TProps>;\n  hasReactiveProps = false;\n  hasSelectedProps = false;\n  hasWildcardProps = false;\n  wildcardPropCreator = null as null | ((propName: string) => unknown);\n\n  constructor(public scope?: Scope) {\n    this.proxy = new Proxy(\n      {\n        __proxyName: 'StateViewProxy', // set proxy name for debugging\n      },\n      {\n        get: (target: any, propName: string) => {\n          if (propName === 'hasOwnProperty') return target.hasOwnProperty;\n          if (propName in target) return (target as any)[propName];\n          const value = this.selectValue(propName as keyof TProps);\n          return value;\n        },\n      },\n    ) as any;\n  }\n\n  defineProp<TValue>(descriptorParams: TConstructDescriptorProps<TValue>) {\n    const descriptor: TModulePropDescriptor<TValue> = {\n      configurable: true,\n      enumerable: true,\n      reactive: false,\n      getRev: descriptorParams.getValue,\n      stateView: null,\n      dynamic: false,\n      ...descriptorParams,\n    };\n    (this.descriptors as any)[descriptor.name] = descriptor;\n    if (descriptor.reactive) this.hasReactiveProps = true;\n    defineGetter(this.props as any, descriptor.name, () => descriptor.getValue());\n  }\n\n  defineWildcardProp(cb: StateView['wildcardPropCreator']) {\n    this.hasWildcardProps = true;\n    this.wildcardPropCreator = cb;\n  }\n\n  private selectValue(propName: keyof TProps) {\n    let descriptor = this.descriptors[propName];\n\n    if (!descriptor) {\n      if (!this.wildcardPropCreator) {\n        throw new Error(`Property ${propName} is not defined`);\n      }\n      this.wildcardPropCreator(propName as string);\n      descriptor = this.descriptors[propName];\n    }\n\n    const value = descriptor.getValue();\n    if (descriptor.reactive) {\n      this.selectedDescriptors[propName] = descriptor;\n      if (!this.hasSelectedProps) this.hasSelectedProps = true;\n    }\n    return value;\n  }\n\n  getSnapshot() {\n\n    // TODO get affected modules?\n    const selectedDescriptors = this.selectedDescriptors;\n    const result = {} as TProps;\n    forEach(selectedDescriptors, (descr, propName) => {\n      (result as any)[propName] = descr.stateView ? descr.stateView.getSnapshot() : descr.getRev();\n    });\n    return result;\n  }\n\n  // use for debugging\n  get selectedProps() {\n    const selectedDescriptors = this.selectedDescriptors;\n    const result = {} as TProps;\n    forEach(selectedDescriptors, (descr, propName) => {\n      if (!descr.reactive) return;\n      // @ts-ignore\n      result[propName] = descr.getHash();\n    });\n    return result;\n  }\n\n  getAnalytics() {\n    // TODO ?\n  }\n\n  // DEFINE MULTIPLE WAYS FOR EXTENDING THE ModuleView\n  // TODO: remove overloads that we will never use\n\n  /**\n   * // Extend with a factory returning a new ModuleView\n   *\n   * module.extend((props, view) => {\n   *   const module = scope.resolve(MyModule)\n   *   return new ModuleView(module)\n   * })\n   */\n  extend<TNewView extends StateView<any>>(newViewFactory: (props: TProps, view: StateView<TProps>) => TNewView): TNewView;\n\n  // eslint-disable-next-line no-dupe-class-members\n  extend<TNewProps>(newProps: TNewProps): MergeViews<StateView<TProps>, TStateViewFor<TNewProps>>;\n  // eslint-disable-next-line no-dupe-class-members\n  extend(fn: Function): StateView<any> {\n    const extendResult = fn(this.props, this);\n\n    if (extendResult instanceof StateView) {\n      return extendResult;\n    }\n\n    if (typeof extendResult === 'object') {\n      if (!this.scope) {\n        throw new Error('You should define a Scope to use .extend()');\n      }\n      const extendedModule = this.scope.create(extendResult);// TODO destroy module after component destroy, create a component scope\n      const extendedModuleView = createStateViewForModule(extendedModule); // TODO do not use the same pickers\n      const result = this.mergeView(extendedModuleView);\n      return result;\n    }\n\n    throw new Error('Can not extend the module');\n  }\n\n  clone() {\n    const clone = new StateView<TProps>(this.scope);\n    forEach(this.descriptors, descriptor => clone.defineProp(descriptor));\n    clone.components = this.components;\n    return clone;\n  }\n\n  mergeView<\n    TExtension extends StateView<any>,\n    TResult = MergeViews<StateView<TProps>, TExtension>\n    >(extension: TExtension): TResult {\n    // merge one view into another\n    const mergeResult = this.clone();\n    forEach(extension.descriptors, descriptor => mergeResult.defineProp(descriptor as any));\n    return mergeResult as any as TResult;\n  }\n\n  components = {} as Dict<ComponentView<any>>;\n\n  registerComponent<TView extends StateView<TProps>>(componentId: string, forceUpdate: Function): ComponentView<TView> {\n    const componentView = new ComponentView<TView>(this as any, componentId, forceUpdate);\n    this.components[componentId] = componentView;\n    return componentView;\n  }\n\n  destroyComponent(componentId: string) {\n    const componentView = this.components[componentId];\n    if (!componentView) return;\n\n    delete this.components[componentId];\n  }\n\n}\n\nexport function createStateViewForModule<T>(module: T) {\n  const scope = getInstanceMetadata(module).provider.scope;\n  const stateView = new StateView(scope);\n  return stateView\n    .extend(pickProps(module)) // expose the module props\n    .extend(pickStateViews(module)) // expose children stateViews\n    .extend(pickLoadingState(module)) // expose the module loading state\n    .extend(pickState(module)) // expose the reactive state\n    .extend(pickControllers(module)); // expose controllers\n}\n\nexport type TStateViewFor<TModuleConfig, TModule = TModuleInstanceFor<TModuleConfig>> =\n  StateView< TModule & GetStateViewProps<TModule> & GetLoadingState & GetModuleState<TModule> & GetControllerProps<TModule>>\n\nexport type MergeViews<\n  TView1 extends StateView<any>,\n  TView2 extends StateView<any>\n  > = StateView<GetProps<TView1> & GetProps<TView2>>\n\nexport class ComponentView<TStateView extends StateView<any>> {\n  constructor(public stateView: TStateView, public id: string, public forceUpdate: Function) {\n  }\n}\n\n// const editor = new EditorService();\n// const ev = createStateViewForModule(editor);\n// ev.props.getScene(1);\n// ev.props.setActiveSceneId()\n// ev.props.getScene(1);\n// ev.props.getSceneController(1);\n// ev.props.myRandomVal;\n// ev.props.bindActiveItem\n// //\n// const evprop: GetStateViewProps<EditorService>\n// evprop.bindActiveItem.props\n\n// //\n// const sv = new StateView();\n// const ed2 = sv.extend(pickState(editor));\n// const pickedStateFn = pickState(ed2);\n// const pickedState = pickedStateFn(sv.props, sv);\n// const edState: GetModuleState<EditorService>\n// edState.setActiveSceneId()\n//\n// const ev2 = useComponentView(ev);\n// ev2.isLoading\n// ev2.getScene('1')\n\n// const contProps: GetControllerProps<typeof ev.props>;\n// contProps.getScene(1);\n// const mergedProps: GetControllerProps<typeof ev.props> & GetProps<typeof ev>\n// mergedProps.getScene(1);\n// const module: GetModule<typeof ev>\n// const mergedView:  ModuleView<GetModule<typeof ev>, GetProps<typeof ev> & GetControllerProps<GetModule<typeof ev>>>;\n// mergedView.props.\n\n// const evCont = ev.extend(pickControllers);\n//\n// evCont.props.getScene()\n// evCont.props.setActiveSceneId\n// e\n// const ev2: PickState<ModuleView<TModuleInstanceFor<EditorService>, TModuleInstanceFor<EditorService>>> = null as any;\n//\n// const st: GetState<ModuleView<EditorService, EditorService>>;\n// const stProps: GetState<ModuleView<EditorService, EditorService>> & GetProps<ModuleView<EditorService, EditorService>>;\n// st.props\n// stProps.setActiveSceneId(1)\n// ev2.props.setActiveSceneId(1);\n// // /**\n//  * // Extend with a factory returning an object\n//  *\n//  * module.extend(module => {\n//  *   const foo = module.foo;\n//  *   const bar = 2;\n//  *   const foobar = foo + bar;\n//  *   return { foo, foobar };\n//  * })\n//  */\n// // extend<TNewProps>(newPropsFactory: (props: TProps) => TNewProps): MergeViews<ModuleView<TModule, TProps>, TDefaultViewFor<TNewProps>>;\n// /**\n//  * // extend with an object\n//  *\n//  * module.extend({\n//  *   foo: 1,\n//  *   bar: 2,\n//  * })\n//  */\n\nexport type TModulePropDescriptor<TValue> = {\n  type: string,\n  name: string,\n  reactive: boolean,\n  stateView: StateView | null,\n  getValue(): TValue,\n  getRev(): unknown, // used for fast comparison of complex object, use getValue() as default value\n  enumerable: boolean,\n  configurable: boolean,\n  dynamic: boolean,\n  // module: unknown, // one module view can be assembled from multiple modules\n}\n\nexport type TConstructDescriptorProps<TValue, TDescriptor = TModulePropDescriptor<TValue>> = Partial<TDescriptor> & Required<Pick<TModulePropDescriptor<TValue>, 'type' | 'name' | 'getValue'>>\nexport type TGetDescriptorsForProps<TProps extends Dict<any>> = {[P in keyof TProps]: TModulePropDescriptor<TProps[P]>}\nexport type GetProps<TModuleView> = TModuleView extends StateView<infer TProps> ? TProps : never;\n\n","import produce from 'immer';\nimport { createNanoEvents } from 'nanoevents';\nimport { isPlainObject } from 'is-plain-object';\nimport {\n  Scope, generateId, Dict, defineGetter, capitalize, defineSetter,\n} from '../scope';\nimport { traverse } from '../utils/traverse';\n\n/**\n * All React related code should be handled in ReactAdapter\n * Framework agnostic store\n */\nexport class Store {\n\n  // keeps the state for all modules here as a map of immutable objects\n  rootState = { } as Dict<any>;\n\n  // keeps additional metadata\n  modulesMetadata = { } as Dict<StatefulModule>;\n\n  currentMutation: Mutation | null = null;\n  moduleRevisions: Dict<number> = {};\n\n  createState<TConfigCreator extends TStateConfigCreator>(stateName: string, configCreator: TConfigCreator): TStateControllerFor<TConfigCreator> {\n\n    if (this.modulesMetadata[stateName]) {\n      throw new Error(`State with a name \"${stateName}\" is already created`);\n    }\n\n    const config = createConfig(configCreator);\n\n    console.log('REGISTER STORE', stateName);\n    const controller = new ModuleStateController(this, stateName, config);\n\n    return controller as TStateControllerFor<TConfigCreator>;\n  }\n\n  dispatchMutation(mutation: Mutation) {\n    console.log('RUN MUTATION', mutation);\n    const stateName = mutation.stateName;\n    const stateController = this.modulesMetadata[stateName].controller;\n\n    if (this.currentMutation) {\n      throw new Error('Can not run mutation while previous mutation is not completed');\n    }\n\n    this.currentMutation = mutation;\n    stateController.applyMutation(mutation);\n    this.currentMutation = null;\n\n    // trigger subscribed components to re-render\n    this.events.emit('onMutation', mutation, this);\n  }\n\n  getMetadata(stateName: string) {\n    return this.modulesMetadata[stateName];\n  }\n\n  toJSON() {\n    // TODO use for debugging\n  }\n\n  // TODO : move to hooks?\n  currentScope: Record<string, Scope> = {};\n\n  setModuleScope(moduleName: string, scope: Scope) {\n    this.currentScope[moduleName] = scope;\n  }\n\n  resetModuleScope(moduleName: string) {\n    delete this.currentScope[moduleName];\n  }\n\n  destroyState(stateName: string) {\n    delete this.rootState[stateName];\n  }\n\n  isRecordingAccessors = false;\n\n  affectedModules: Record<string, number> = {};\n\n  listenAffectedModules(cb: Function) {\n    this.isRecordingAccessors = true;\n    cb();\n    const result = this.affectedModules;\n    this.isRecordingAccessors = false;\n    this.affectedModules = {};\n    return result;\n  }\n\n  currentContext: Record<string, Scope> = {};\n\n  setModuleContext(moduleName: string, scope: Scope) {\n    this.currentContext[moduleName] = scope;\n  }\n\n  resetModuleContext(moduleName: string) {\n    delete this.currentContext[moduleName];\n  }\n\n  events = createNanoEvents<StoreEvents>();\n}\n\nexport interface StoreEvents {\n  onMutation: (mutation: Mutation, store: Store) => void\n}\n\nexport class ModuleStateController {\n\n  draftState: any = null;\n\n  constructor(public store: Store, public stateName: string, config: TStateConfig) {\n    const defaultState = getDefaultStateFromConfig(config);\n\n    // use immer to create an immutable state\n    store.rootState[stateName] = produce(defaultState, () => {});\n\n    // create metadata\n    const controller = this;\n    const metadata: StatefulModule = {\n      config,\n      controller,\n      rev: 0,\n      mutations: {},\n    };\n    store.modulesMetadata[stateName] = metadata;\n\n    // generate getters\n    Object.keys(defaultState).forEach(propName => {\n      defineGetter(controller, propName, () => controller.state[propName]);\n      defineSetter(controller, propName, val => {\n        controller.state[propName] = val;\n        return true;\n      });\n    });\n\n    // find and register other mutations and getters\n    traverse(config, (propName, descriptor) => {\n\n      if (propName in defaultState) return;\n\n      // register state getters\n      if (descriptor.get) {\n        defineGetter(controller, propName, descriptor.get);\n        return;\n      }\n\n      // register getter functions\n      if (propName.startsWith('get')) {\n        defineGetter(controller, propName, descriptor.value);\n        return;\n      }\n\n      // register mutations\n      if (typeof descriptor.value === 'function') {\n        this.registerMutation(propName, (config as any)[propName]);\n      }\n    });\n\n    // create auto-generated mutations\n    Object.keys(defaultState).forEach(propertyName => {\n      const mutationName = `set${capitalize(propertyName)}`;\n      if (metadata.mutations[mutationName]) return;\n\n      const mutationMethod = (propVal: unknown) => (controller as any)[propertyName] = propVal;\n      controller.registerMutation(mutationName, mutationMethod);\n    });\n\n    // bulk state update mutation\n    controller.registerMutation('updateState', (statePatch: object) => Object.assign(controller, statePatch));\n  }\n\n  registerMutation(mutationName: string, mutationMethod: Function) {\n    const controller = this;\n    const { store, stateName, metadata } = controller;\n\n    metadata.mutations[mutationName] = mutationMethod;\n\n    // override the original Module method to dispatch mutations\n    (controller as any)[mutationName] = function (...args: any[]) {\n      // if this method was called from another mutation\n      // we don't need to dispatch a new mutation again\n      // just call the original method\n      if (store.currentMutation) {\n        if (store.currentMutation.stateName !== stateName) {\n          const parentMutation = store.currentMutation;\n          const parentMutationName = `${parentMutation.stateName}_${parentMutation.mutationName}`;\n          const childMutationName = `${stateName}_${mutationName}`;\n\n          // TODO should we really prevent that?\n          throw new Error(`Can not run a mutation of another module. Call ${parentMutationName} from ${childMutationName}`);\n        }\n        return mutationMethod.apply(controller, args);\n      }\n\n      const mutation = {\n        id: Number(generateId()),\n        payload: args,\n        stateName,\n        mutationName,\n      };\n      store.dispatchMutation(mutation);\n    };\n  }\n\n  applyMutation(mutation: Mutation) {\n    const stateName = mutation.stateName;\n    const mutationName = mutation.mutationName;\n    const state = this.store.rootState[stateName];\n    this.store.rootState[stateName] = produce(state, (draft: unknown) => {\n      this.draftState = draft;\n      const controller = this as any;\n      // eslint-disable-next-line prefer-spread\n      controller.metadata.mutations[mutationName].apply(controller, mutation.payload);\n    });\n    this.metadata.rev++;\n    this.draftState = null;\n  }\n\n  get state() {\n    if (this.draftState) return this.draftState;\n\n    const store = this.store;\n    const stateName = this.stateName;\n\n    if (store.isRecordingAccessors) {\n      store.affectedModules[stateName] = this.metadata.rev;\n    }\n\n    return store.rootState[stateName];\n  }\n\n  // TODO remove\n  set state(val: any) {\n    console.log('set state ', val);\n    throw new Error('Trying to set state');\n  }\n\n  get metadata() {\n    return this.store.modulesMetadata[this.stateName];\n  }\n}\n\nfunction getDefaultStateFromConfig(config: any) {\n  const defaultState: Dict<any> = {};\n\n  // if the `state` variable is set in the config, then pick the default state from it\n  if (config.state) {\n    traverse(config.state, (propName, descr) => {\n      defaultState[propName] = config.state[propName];\n    });\n    return defaultState;\n  }\n\n  // otherwise, use writable config variables as default state\n  traverse(config, (propName, descr) => {\n    if (descr.get) return;\n    const propVal = descr.value;\n    if (typeof propVal === 'function') return;\n    defaultState[propName] = propVal;\n  });\n  return defaultState;\n}\n\nexport interface Mutation {\n  id: number;\n  stateName: string;\n  mutationName: string;\n  payload: any;\n}\n//\n// /**\n//  * use immerjs API to clone the object\n//  */\n// export function clone<T>(state: T) {\n//   return produce(state, draft => {});\n// }\n\nexport const defaultStateConfig: Partial<TStateConfig> = {\n  // persistent: false,\n  // autogenerateMutations: true,\n};\n\nexport type TStateConfigCreator = (new (...args: any) => TStateConfig) | TStateConfig\n\nexport type TStateConfig = {\n  // persistent?: boolean, // TODO\n  // persistentKeys?: boolean, // TODO\n  // autogenerateMutations?: boolean, // TODO\n}\n\nexport interface StatefulModule {\n  rev: number;\n  config: TStateConfig;\n  controller: ModuleStateController;\n  mutations: Dict<Function>;\n}\n\n// todo refactor\n\nexport type TConfigFor<TConfigCreator> =\n  TConfigCreator extends new (...args: any) => infer TConfig ?\n    TConfig extends TStateConfig ? TConfig : never\n    : TConfigCreator extends TStateConfig ? TConfigCreator : never;\n\nexport type TStateConfigFor<TConfigCreator> =\n  TConfigCreator extends new (...args: any) => infer TConfig ?\n    TConfig extends TStateConfig ? TConfig : never\n     : TConfigCreator extends TStateConfig ? TConfigCreator : never;\n\n// export type TStateControllerFor<TConfigCreator, TConfig = TStateConfigFor<TConfigCreator>>\n//   = TConfig extends TStateConfig ?\n//     TConfig['state'] &\n//     PickGeneratedMutations<TConfig> &\n//     Omit<TConfig, keyof TStateConfig> &\n//     TGenericStateController\n//   : never\n\nexport type TStateControllerFor<TConfigCreator, TConfig = TStateConfigFor<TConfigCreator>>\n  = TConfig extends TStateConfig ?\n  PickDefaultState<TConfig> &\n  ModuleStateController &\n  PickGeneratedMutations<PickDefaultState<TConfig>> &\n  Omit<TConfig, keyof TStateConfig>\n  : never\n\ntype GetSetterName<TPropName> = TPropName extends string ? `set${Capitalize<TPropName>}` : never;\n\nexport type PickDefaultState<TConfig extends TStateConfig> = TConfig extends { state: infer TState } ? TState : WritablePart<TConfig>;\n\nexport type PickGeneratedMutations<TState> = {\n  [K in keyof TState as GetSetterName<K>]: (value: TState[K]) => unknown\n}\n\n// Create a WritablePart helper\n// https://github.com/Microsoft/TypeScript/issues/27024#issuecomment-421529650\nexport type IfEquals<X, Y, A, B> =\n  (<T>() => T extends X ? 1 : 2) extends\n    (<T>() => T extends Y ? 1 : 2) ? A : B;\n\ntype WritableKeysOf<T> = {\n  [P in keyof T]: IfEquals<{ [Q in P]: T[P] }, { -readonly [Q in P]: T[P] }, P, never>\n}[keyof T];\n\ntype WritablePart<T> = Pick<T, WritableKeysOf<T>>;\n\nexport function createConfig<TConfig>(configCreator: TConfig | (new (...args: any) => TConfig)): TConfig {\n  const config = isPlainObject(configCreator) ? configCreator : new (configCreator as any)();\n  return config;\n}\n","import { StateView } from './StateView';\n\nexport type TFormBindings<TState, TExtraProps = {}> = {\n  [K in keyof TState]: {\n    name: K;\n    value: TState[K];\n    onChange: (newVal: TState[K]) => unknown;\n  };\n} & TExtraProps\n\nexport function createFormBinding<TState, TExtraProps = {}>(\n  stateGetter: () => TState,\n  stateSetter: (statePatch: Partial<TState>) => unknown,\n  extraPropsGenerator?: (fieldName: keyof TState) => TExtraProps,\n): StateView<TFormBindings<TState, TExtraProps>> {\n\n  const stateView = new StateView<TFormBindings<TState, TExtraProps>>();\n\n\n  stateView.defineWildcardProp(propName => {\n    stateView.defineProp({\n      type: 'InputBinding',\n      name: propName,\n      reactive: true,\n      getValue: () => ({\n        name: propName,\n        value: (stateGetter() as any)[propName],\n        onChange: (newVal: unknown) => (stateSetter as any)({ [propName]: newVal }),\n        ...(extraPropsGenerator ? extraPropsGenerator(propName as keyof TState) : {}),\n      }),\n    });\n  });\n\n  return stateView;\n}\n","export * from './Store';\nexport * from './StateView';\nexport * from './injectState';\nexport * from './form-binding';\n","import { createInjector } from '../scope/injector';\nimport { Provider } from '../scope/provider';\nimport { createLoadingState } from './plugins/pickLoadingState';\nimport { Store, TStateConfigCreator, TStateControllerFor } from './Store';\n\nexport const StateInjectorType = Symbol('stateInjector');\n\nexport function injectState<TConfigCreator extends TStateConfigCreator>(configCreator: TConfigCreator): TStateControllerFor<TConfigCreator> {\n  return createInjector(injector => {\n\n    function createState() {\n      return createStateForModule(injector.provider, configCreator);\n    }\n\n    let state: ReturnType<typeof createState> = null as any;\n\n    return {\n      type: StateInjectorType,\n      load: () => {\n        state = createState();\n      },\n      getValue() {\n        return state;\n      },\n    };\n  });\n}\n\nfunction createStateForModule<TConfigCreator extends TStateConfigCreator>(provider: Provider<any>, stateConfig: TConfigCreator): TStateControllerFor<TConfigCreator> {\n  const stateName = provider.instanceId;\n  const store = provider.scope.resolve(Store);\n  const moduleState = store.createState(stateName, stateConfig);\n  createLoadingState(store, provider);\n  return moduleState;\n}\n","import { GetProps, StateView } from '../StateView';\nimport { traverse } from '../../utils/traverse';\n\nexport function pickControllers<\n  TView extends StateView<any>,\n  TModule\n  >(module: TModule): (props: GetProps<TView>, view: TView) => PickControllers<TView, TModule> {\n\n  return function (props, view) {\n\n    traverse(module as any, (propName, descr) => {\n      if (!propName.endsWith('Controller')) return;\n      const shortName = propName.split('Controller')[0];\n\n      view.defineProp({\n        type: 'Controller',\n        name: shortName,\n        getValue: () => (module as any)[propName],\n      });\n    });\n\n    return view as any;\n  };\n}\n\nexport type PickControllers<TView, TModule> = StateView<GetProps<TView> & GetControllerProps<TModule>>;\nexport type GetControllerName<TStr> = TStr extends `${infer TName}Controller` ? TName : never;\nexport type GetControllerProps<T> = {[K in keyof T as GetControllerName<K>]: T[K] }\n","import { getInstanceMetadata, Provider } from '../../scope/provider';\nimport { getKeys } from '../../utils/traverse';\nimport { GetProps, StateView } from '../StateView';\nimport { Store, TStateControllerFor } from '../Store';\nimport { TLoadingStatus } from '../../scope';\n\nexport function pickLoadingState<TView extends StateView<any>>(module: unknown): (props: GetProps<TView>, view: TView) => PickLoadingState<TView> {\n\n  return function (props, view) {\n\n    const provider = getInstanceMetadata(module).provider;\n    const stateName = getLoadingStateName(provider.instanceId);\n    const store = provider.scope.resolve(Store);\n    const stateController = store.getMetadata(stateName)?.controller;\n\n    if (!stateController) return view as any; // module is not stateful\n\n    getKeys(stateController)\n      .forEach(propName => {\n        view.defineProp({\n          type: 'LoadingState',\n          name: propName,\n          getValue: () => stateController[propName],\n        });\n      });\n\n    return view as any;\n  };\n}\n\nexport type PickLoadingState<TView> = StateView<GetProps<TView> & GetLoadingState>;\nexport type GetLoadingState = TStateControllerFor<LoadingState>;\n\nexport class LoadingState {\n  loadingStatus: TLoadingStatus = 'not-started';\n\n  get isLoading() {\n    return this.loadingStatus === 'loading';\n  }\n\n  get isLoaded() {\n    return this.loadingStatus === 'done';\n  }\n}\n\nexport function createLoadingState(store: Store, moduleProvider: Provider<any>) {\n  const stateName = getLoadingStateName(moduleProvider.instanceId);\n  const loadingState = store.createState(stateName, LoadingState);\n  moduleProvider.waitForLoad.then(() => {\n    loadingState.setLoadingStatus('done');\n  });\n}\n\nexport function getLoadingStateName(moduleStateName: string) {\n  return moduleStateName + '__loading_state';\n}\n","import { GetProps, StateView } from '../StateView';\nimport { traverse } from '../../utils/traverse';\n\nexport type PickModuleProps<TView, TModule> = StateView<GetProps<TView> & TModule>\n\nexport function pickProps<TModule, TProps>(module: TModule): (props: TProps, view: StateView<TProps>) => StateView<TProps & TModule> {\n\n  return function (props, view) {\n\n    traverse(module as any as object, (propName, descr) => {\n      const isGetter = !!descr.get;\n      const isFunction = !isGetter && typeof descr.value === 'function';\n      const getValue = isFunction ? () => descr.value.bind(module) : () => (module as any)[propName];\n\n      view.defineProp({\n        type: 'ModuleProp',\n        reactive: isGetter,\n        name: propName,\n        getValue,\n      });\n    });\n\n    return view as any;\n  };\n}\n","import { GetProps, StateView } from '../StateView';\nimport { traverse } from '../../utils/traverse';\nimport { ModuleStateController } from '../Store';\n\n\nexport type PickState<TView, TModule> = StateView<GetProps<TView> & GetModuleState<TModule>>\nexport type GetModuleState<TModule> = TModule extends { state: infer TState } ? TState : {}\n\n\n\nexport function pickState<TView extends StateView<any>, TModule>(module: TModule): (props: GetProps<TView>, view: TView) => PickState<TView, TModule> {\n\n  return function (props, view) {\n    const stateController = (module as any).state; // TODO allow picking multiple states?\n    if (!(stateController instanceof ModuleStateController)) return view;\n    const metadata = stateController.metadata;\n    const controller = stateController as any;\n\n    traverse(stateController, stateKey => {\n\n      if (stateKey in metadata.mutations) {\n        view.defineProp({\n          type: 'StateMutation',\n          name: stateKey,\n          getValue: () => controller[stateKey],\n        });\n        return;\n      }\n\n      if (stateKey in stateController.state) {\n        view.defineProp({\n          type: 'StateProp',\n          name: stateKey,\n          reactive: true,\n          getValue: () => controller[stateKey],\n        });\n        return;\n      }\n\n      view.defineProp({\n        type: 'StateGetter',\n        name: stateKey,\n        reactive: true,\n        getValue: () => controller[stateKey],\n      });\n\n    });\n\n    return view;\n  }\n}\n","import { GetProps, StateView } from '../StateView';\nimport { traverse } from '../../utils/traverse';\n\nexport function pickStateViews<\n  TView extends StateView<any>,\n  TModule\n  >(module: TModule): (props: GetProps<TView>, view: TView) => PickStateViews<TView, TModule> {\n\n  return function (props, view) {\n\n    const anyModule = module as any;\n\n    traverse(module as any, (propName) => {\n      const stateView: StateView<any> = anyModule[propName];\n      if (!(anyModule[propName] instanceof StateView)) return;\n\n      view.defineProp({\n        type: 'StateView',\n        name: propName,\n        reactive: true,\n        stateView,\n        getValue: () => stateView.proxy,\n      });\n    });\n\n    return view;\n  };\n}\n\n\nexport type GetStateViewName<TModule, TProp extends keyof TModule> = TModule[TProp] extends StateView<any> ? TProp : never;\nexport type PickStateViews<TView, TModule> = StateView<GetProps<TView> & GetStateViewProps<TModule>>;\nexport type GetStateViewProps<TModule> = {[K in keyof TModule as GetStateViewName<TModule, K>]: TModule[K] extends StateView<any> ? TModule[K]['props'] : never }\n","import { isPlainObject } from 'is-plain-object';\n\n/**\n * Compare 2 object with limited depth\n */\nexport function isDeepEqual(obj1: any, obj2: any, currentDepth: number, maxDepth: number): boolean {\n  if (obj1 === obj2) return true;\n  if (currentDepth === maxDepth) return false;\n  if (Array.isArray(obj1) && Array.isArray(obj2)) return isArrayEqual(obj1, obj2);\n  if (isPlainObject(obj1) && isPlainObject(obj2)) {\n    const [keys1, keys2] = [Object.keys(obj1), Object.keys(obj2)];\n    if (keys1.length !== keys2.length) return false;\n    for (const key of keys1) {\n      if (!isDeepEqual(obj1[key], obj2[key], currentDepth + 1, maxDepth)) return false;\n    }\n    return true;\n  }\n  return false;\n}\n\n/**\n * consider isSimilar as isDeepEqual with depth 2\n */\nexport function isSimilar(obj1: any, obj2: any) {\n  return isDeepEqual(obj1, obj2, 0, 2);\n}\n\n/**\n * Shallow comparison of 2 arrays\n */\nfunction isArrayEqual(a: any[], b: any[]) {\n  if (a === b) return true;\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\n\n/**\n * Shallow compare\n */\nexport function isEqual(obj1: any, obj2: any): boolean {\n  return isDeepEqual(obj1, obj2, 0, 1);\n}\n","/**\n * Travers class methods and props\n */\nimport { isPlainObject } from 'is-plain-object';\nimport { Dict } from '../scope';\n\n// helper methods to travers class instances prototype chains\n\nexport function traverse<T extends object>(\n  instance: T,\n  cb: (propName: string, descriptor: PropertyDescriptor) => unknown,\n) {\n  let entity = instance;\n  const prototypes = [];\n\n  if (isPlainObject(entity)) {\n    prototypes.push(entity);\n  } else {\n    while (entity.constructor.name !== 'Object') {\n      prototypes.push(entity);\n      entity = Object.getPrototypeOf(entity);\n    }\n  }\n\n  const alreadyTraversed: Record<string, boolean> = {};\n\n  for (const proto of prototypes) {\n    const propNames = Object.getOwnPropertyNames(proto);\n    for (const propName of propNames) {\n      if (propName in alreadyTraversed) continue;\n      alreadyTraversed[propName] = true;\n      const descriptor = Object.getOwnPropertyDescriptor(proto, propName);\n      if (!descriptor) return;\n      const shouldStop = cb(propName, descriptor);\n      if (shouldStop) return;\n    }\n  }\n}\n\nexport function getDescriptors<T>(instance: T): Dict<PropertyDescriptor>{\n  const descriptors: Dict<PropertyDescriptor> = {}\n  traverse(instance as any, (propName, descriptor) => {\n    descriptors[propName] = descriptor;\n  });\n  return descriptors;\n}\n\nexport function getKeys<T>(instance: T): (keyof T)[]{\n  const keys: any[] = [];\n  traverse(instance as any, propName => {\n    keys.push(propName);\n  });\n  return keys;\n}\n\nexport function filterKeys(obj: object, filterFn: (key: string) => unknown) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => filterFn(key)));\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__156__;","module.exports = __WEBPACK_EXTERNAL_MODULE__386__;","export let createNanoEvents = () => ({\n  events: {},\n  emit(event, ...args) {\n    ;(this.events[event] || []).forEach(i => i(...args))\n  },\n  on(event, cb) {\n    ;(this.events[event] = this.events[event] || []).push(cb)\n    return () =>\n      (this.events[event] = (this.events[event] || []).filter(i => i !== cb))\n  }\n})\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(18);\n",""],"names":[],"sourceRoot":""}